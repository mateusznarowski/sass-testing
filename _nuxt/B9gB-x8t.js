import{I as w,bo as Fe,bp as we,A as x,aM as X,G as ue,B as _,e as g,D as B,bq as Ae,d as oe,f as Y,F as se,Z as xe,aJ as Le,aD as Z,aN as Ie,br as z,bs as ke,aO as Be,r as F,aF as de,aS as R,aQ as Q,w as A,C as S,E as a,P as V,bt as Se,bu as Ve,g as fe,W as P,aI as M,bv as Ke,o as He,c as Re,aY as ve,aE as ce,bw as Te,bx as Pe}from"./D50czNDq.js";import{f as Oe}from"./CdE4uaFj.js";function De(r){return w(()=>Fe(r)?!!we(r)?.closest("form"):!0)}function $e(){return{ALT:"Alt",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",BACKSPACE:"Backspace",CAPS_LOCK:"CapsLock",CONTROL:"Control",DELETE:"Delete",END:"End",ENTER:"Enter",ESCAPE:"Escape",F1:"F1",F10:"F10",F11:"F11",F12:"F12",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",HOME:"Home",META:"Meta",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",SHIFT:"Shift",SPACE:" ",TAB:"Tab",CTRL:"Control",ASTERISK:"*",SPACE_CODE:"Space"}}var Me=x({inheritAttrs:!1,__name:"VisuallyHiddenInputBubble",props:{name:{type:String,required:!0},value:{type:null,required:!0},checked:{type:Boolean,required:!1,default:void 0},required:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},feature:{type:String,required:!1,default:"fully-hidden"}},setup(r){const t=r,{primitiveElement:l,currentElement:u}=X(),s=w(()=>t.checked??t.value);return ue(s,(n,f)=>{if(!u.value)return;const c=u.value,d=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(d,"value").set;if(b&&n!==f){const p=new Event("input",{bubbles:!0}),L=new Event("change",{bubbles:!0});b.call(c,n),c.dispatchEvent(p),c.dispatchEvent(L)}}),(n,f)=>(g(),_(Ae,B({ref_key:"primitiveElement",ref:l},{...t,...n.$attrs},{as:"input"}),null,16))}}),re=Me,Ne=x({inheritAttrs:!1,__name:"VisuallyHiddenInput",props:{name:{type:String,required:!0},value:{type:null,required:!0},checked:{type:Boolean,required:!1,default:void 0},required:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},feature:{type:String,required:!1,default:"fully-hidden"}},setup(r){const t=r,l=w(()=>typeof t.value=="object"&&Array.isArray(t.value)&&t.value.length===0&&t.required),u=w(()=>typeof t.value=="string"||typeof t.value=="number"||typeof t.value=="boolean"||t.value===null||t.value===void 0?[{name:t.name,value:t.value}]:typeof t.value=="object"&&Array.isArray(t.value)?t.value.flatMap((s,n)=>typeof s=="object"?Object.entries(s).map(([f,c])=>({name:`${t.name}[${n}][${f}]`,value:c})):{name:`${t.name}[${n}]`,value:s}):t.value!==null&&typeof t.value=="object"&&!Array.isArray(t.value)?Object.entries(t.value).map(([s,n])=>({name:`${t.name}[${s}]`,value:n})):[]);return(s,n)=>(g(),oe(se,null,[Y(" We render single input if it's required "),l.value?(g(),_(re,B({key:s.name},{...t,...s.$attrs},{name:s.name,value:s.value}),null,16,["name","value"])):(g(!0),oe(se,{key:1},xe(u.value,f=>(g(),_(re,B({key:f.name},{ref_for:!0},{...t,...s.$attrs},{name:f.name,value:f.value}),null,16,["name","value"]))),128))],2112))}}),Ge=Ne;function je(r,t,l){return r===void 0?!1:Array.isArray(r)?r.some(u=>T(u,t,l)):T(r,t,l)}function T(r,t,l){return r===void 0||t===void 0?!1:typeof r=="string"?r===t:typeof l=="function"?l(r,t):typeof l=="string"?r?.[l]===t?.[l]:Le(r,t)}const[ee,We]=Z("ListboxRoot");var Ue=x({__name:"ListboxRoot",props:{modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1},multiple:{type:Boolean,required:!1},orientation:{type:String,required:!1,default:"vertical"},dir:{type:String,required:!1},disabled:{type:Boolean,required:!1},selectionBehavior:{type:String,required:!1,default:"toggle"},highlightOnHover:{type:Boolean,required:!1},by:{type:[String,Function],required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue","highlight","entryFocus","leave"],setup(r,{expose:t,emit:l}){const u=r,s=l,{multiple:n,highlightOnHover:f,orientation:c,disabled:d,selectionBehavior:E,dir:b}=Ie(u),{getItems:p}=z({isProvider:!0}),{handleTypeaheadSearch:L}=ke(),{primitiveElement:O,currentElement:m}=X(),q=$e(),D=Be(b),pe=De(m),$=F(),K=F(!1),N=F(!0),y=de(u,"modelValue",s,{defaultValue:u.defaultValue??(n.value?[]:void 0),passive:u.modelValue===void 0,deep:!0});function me(e){if(K.value=!0,u.multiple){const i=Array.isArray(y.value)?[...y.value]:[],o=i.findIndex(v=>T(v,e,u.by));u.selectionBehavior==="toggle"?(o===-1?i.push(e):i.splice(o,1),y.value=i):(y.value=[e],$.value=e)}else u.selectionBehavior==="toggle"&&T(y.value,e,u.by)?y.value=void 0:y.value=e;setTimeout(()=>{K.value=!1},1)}const h=F(null),G=F(null),I=F(!1),j=F(!1),te=Q(),W=Q(),ae=Q();function U(){return p().map(e=>e.ref).filter(e=>e.dataset.disabled!=="")}function C(e,i=!0){if(!e)return;h.value=e,N.value&&h.value.focus(),i&&h.value.scrollIntoView({block:"nearest"});const o=p().find(v=>v.ref===e);s("highlight",o)}function ye(e){if(I.value)ae.trigger(e);else{const i=p().find(o=>T(o.value,e,u.by));i&&(h.value=i.ref,C(i.ref))}}function he(e){h.value&&h.value.isConnected&&(e.preventDefault(),e.stopPropagation(),j.value||h.value.click())}function be(e){if(N.value){if(K.value=!0,I.value)W.trigger(e);else{const i=e.altKey||e.ctrlKey||e.metaKey;if(i&&e.key==="a"&&n.value){const o=p(),v=o.map(k=>k.value);y.value=[...v],e.preventDefault(),C(o[o.length-1].ref)}else if(!i){const o=L(e.key,p());o&&C(o)}}setTimeout(()=>{K.value=!1},1)}}function ge(){j.value=!0}function _e(){R(()=>{j.value=!1})}function le(){R(()=>{const e=new KeyboardEvent("keydown",{key:"PageUp"});ie(e)})}function J(e){const i=h.value;i?.isConnected&&(G.value=i),h.value=null,s("leave",e)}function Ee(e){const i=new CustomEvent("listbox.entryFocus",{bubbles:!1,cancelable:!0});if(e.currentTarget?.dispatchEvent(i),s("entryFocus",i),!i.defaultPrevented)if(G.value)C(G.value);else{const o=U()?.[0];C(o)}}function ie(e){const i=Se(e,c.value,D.value);if(!i)return;let o=U();if(h.value){if(i==="last")o.reverse();else if(i==="prev"||i==="next"){i==="prev"&&o.reverse();const v=o.indexOf(h.value);o=o.slice(v+1)}Ce(e,o[0])}if(o.length){const v=!h.value&&i==="prev"?o.length-1:0;C(o[v])}if(I.value)return W.trigger(e)}function Ce(e,i){if(!(I.value||u.selectionBehavior!=="replace"||!n.value||!Array.isArray(y.value)||(e.altKey||e.ctrlKey||e.metaKey)&&!e.shiftKey)&&e.shiftKey){const v=p().filter(H=>H.ref.dataset.disabled!=="");let k=v.find(H=>H.ref===i)?.value;if(e.key===q.END?k=v[v.length-1].value:e.key===q.HOME&&(k=v[0].value),!k||!$.value)return;const qe=Oe(v.map(H=>H.value),$.value,k);y.value=qe}}async function ne(e){if(await R(),I.value)te.trigger(e);else{const i=U(),o=i.find(v=>v.dataset.state==="checked");o?C(o):i.length&&C(i[0])}}return ue(y,()=>{K.value||R(()=>{ne()})},{immediate:!0,deep:!0}),t({highlightedElement:h,highlightItem:ye,highlightFirstItem:le,highlightSelected:ne,getItems:p}),We({modelValue:y,onValueChange:me,multiple:n,orientation:c,dir:D,disabled:d,highlightOnHover:f,highlightedElement:h,isVirtual:I,virtualFocusHook:te,virtualKeydownHook:W,virtualHighlightHook:ae,by:u.by,firstValue:$,selectionBehavior:E,focusable:N,onLeave:J,onEnter:Ee,changeHighlight:C,onKeydownEnter:he,onKeydownNavigation:ie,onKeydownTypeAhead:be,onCompositionStart:ge,onCompositionEnd:_e,highlightFirstItem:le}),(e,i)=>(g(),_(a(V),{ref_key:"primitiveElement",ref:O,as:e.as,"as-child":e.asChild,dir:a(D),"data-disabled":a(d)?"":void 0,onPointerleave:J,onFocusout:i[0]||(i[0]=async o=>{const v=o.relatedTarget||o.target;await R(),h.value&&a(m)&&!a(m).contains(v)&&J(o)})},{default:A(()=>[S(e.$slots,"default",{modelValue:a(y)}),a(pe)&&e.name?(g(),_(a(Ge),{key:0,name:e.name,value:a(y),disabled:a(d),required:e.required},null,8,["name","value","disabled","required"])):Y("v-if",!0)]),_:3},8,["as","as-child","dir","data-disabled"]))}}),nt=Ue,Je=x({__name:"ListboxContent",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(r){const{CollectionSlot:t}=z(),l=ee(),u=Ve(!1,10);return(s,n)=>(g(),_(a(t),null,{default:A(()=>[fe(a(V),{role:"listbox",as:s.as,"as-child":s.asChild,tabindex:a(l).focusable.value?a(l).highlightedElement.value?"-1":"0":void 0,"aria-orientation":a(l).orientation.value,"aria-multiselectable":!!a(l).multiple.value,"data-orientation":a(l).orientation.value,onMousedown:n[0]||(n[0]=M(f=>u.value=!0,["left"])),onFocus:n[1]||(n[1]=f=>{a(u)||a(l).onEnter(f)}),onKeydown:[n[2]||(n[2]=P(M(f=>{a(l).focusable.value&&a(l).onKeydownNavigation(f)},["prevent"]),["down","up","left","right","home","end"])),P(a(l).onKeydownEnter,["enter"]),a(l).onKeydownTypeAhead]},{default:A(()=>[S(s.$slots,"default")]),_:3},8,["as","as-child","tabindex","aria-orientation","aria-multiselectable","data-orientation","onKeydown"])]),_:3}))}}),ot=Je,Qe=x({__name:"ListboxFilter",props:{modelValue:{type:String,required:!1},autoFocus:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"input"}},emits:["update:modelValue"],setup(r,{emit:t}){const l=r,s=de(l,"modelValue",t,{defaultValue:"",passive:l.modelValue===void 0}),n=ee(),{primitiveElement:f,currentElement:c}=X(),d=w(()=>l.disabled||n.disabled.value||!1),E=F();return Ke(()=>E.value=n.highlightedElement.value?.id),He(()=>{n.focusable.value=!1,setTimeout(()=>{l.autoFocus&&c.value?.focus()},1)}),Re(()=>{n.focusable.value=!0}),(b,p)=>(g(),_(a(V),{ref_key:"primitiveElement",ref:f,as:b.as,"as-child":b.asChild,value:a(s),disabled:d.value?"":void 0,"data-disabled":d.value?"":void 0,"aria-disabled":d.value??void 0,"aria-activedescendant":E.value,type:"text",onKeydown:[P(M(a(n).onKeydownNavigation,["prevent"]),["down","up","home","end"]),P(a(n).onKeydownEnter,["enter"])],onInput:p[0]||(p[0]=L=>{s.value=L.target.value,a(n).highlightFirstItem()}),onCompositionstart:a(n).onCompositionStart,onCompositionend:a(n).onCompositionEnd},{default:A(()=>[S(b.$slots,"default",{modelValue:a(s)})]),_:3},8,["as","as-child","value","disabled","data-disabled","aria-disabled","aria-activedescendant","onKeydown","onCompositionstart","onCompositionend"]))}}),st=Qe;const[rt,Xe]=Z("ListboxGroup");var Ye=x({__name:"ListboxGroup",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(r){const t=r,l=ve(void 0,"reka-listbox-group");return Xe({id:l}),(u,s)=>(g(),_(a(V),B({role:"group"},t,{"aria-labelledby":a(l)}),{default:A(()=>[S(u.$slots,"default")]),_:3},16,["aria-labelledby"]))}}),ut=Ye;const Ze="listbox.select",[ze,et]=Z("ListboxItem");var tt=x({__name:"ListboxItem",props:{value:{type:null,required:!0},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"div"}},emits:["select"],setup(r,{emit:t}){const l=r,u=t,s=ve(void 0,"reka-listbox-item"),{CollectionItem:n}=z(),{forwardRef:f,currentElement:c}=ce(),d=ee(),E=w(()=>c.value===d.highlightedElement.value),b=w(()=>je(d.modelValue.value,l.value,d.by)),p=w(()=>d.disabled.value||l.disabled);async function L(m){u("select",m),!m?.defaultPrevented&&!p.value&&m&&(d.onValueChange(l.value),d.changeHighlight(c.value))}function O(m){const q={originalEvent:m,value:l.value};Pe(Ze,L,q)}return et({isSelected:b}),(m,q)=>(g(),_(a(n),{value:m.value},{default:A(()=>[Te([E.value,b.value],()=>fe(a(V),B({id:a(s)},m.$attrs,{ref:a(f),role:"option",tabindex:a(d).focusable.value?E.value?"0":"-1":-1,"aria-selected":b.value,as:m.as,"as-child":m.asChild,disabled:p.value?"":void 0,"data-disabled":p.value?"":void 0,"data-highlighted":E.value?"":void 0,"data-state":b.value?"checked":"unchecked",onClick:O,onKeydown:P(M(O,["prevent"]),["space"]),onPointermove:q[0]||(q[0]=D=>{a(d).highlightedElement.value!==a(c)&&(a(d).highlightOnHover.value?a(d).changeHighlight(a(c),!1):a(d).focusable.value||a(d).changeHighlight(a(c),!1))})}),{default:A(()=>[S(m.$slots,"default")]),_:3},16,["id","tabindex","aria-selected","as","as-child","disabled","data-disabled","data-highlighted","data-state","onKeydown"]),q,1)]),_:3},8,["value"]))}}),dt=tt,at=x({__name:"ListboxItemIndicator",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(r){const t=r;ce();const l=ze();return(u,s)=>a(l).isSelected.value?(g(),_(a(V),B({key:0,"aria-hidden":"true"},t),{default:A(()=>[S(u.$slots,"default")]),_:3},16)):Y("v-if",!0)}}),ft=at;export{st as L,Ge as V,ot as a,ut as b,dt as c,ft as d,nt as e,ee as f,rt as i,De as u};
